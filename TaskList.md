# Задачи

## READ.ME

* [ ] Перевести Read.Me на английский язык
* [ ] в Read.Me оставить только рекламу продукта, пособие по сборке и внутреннюю кухню вынести в вики


## Файлы исходного кода

* [x] файлы хранить в кодировке ANSI
* [ ] Использовать оператор переноса для строк кода больше 80 символов


## Юникод

* [x] к строковым литералам применять макрос `__TEXT` или WStr()
* [x] юникодные функции и структуры должны быть с W на конце, неюникодные — с A.
* [x] все интерфейсы работают только с юникодными строками

## Сборка

* [x] Пакетный файл настройки путей к цепочке инструментов сборки
* [x] Makefile для сборки
* [x] файл с зависимостями
* [x] сборка под GCC разных версий
* [ ] сборка под LLVM
* [ ] сборка под GAS и GAS64
* [ ] предварительно скомпилированные заголовочники


## Создание и уничтожение объектов

[x] Объекты создаёт функция CreateInstance
[x] Уничтожение объектов в обратном порядке: сначала освобождают ссылки на внешние объекты, затем на внутренние
[x] Слабые ссылки для глобальных объектов
[ ] Пул объектов


## Асинхронность

Использовать асинхронные функции:

* [x] AcceptEx
* [ ] ConnectEx
* [ ] DisconnectEx
* [ ] TransmitPackets
* [x] WSARecv
* [x] WSASend


## Строки

* [x] тип данных строк, существующих в частной куче
* [x] интерфейсы существующие в куче возвращают строки из кучи


## Методы

Обработчики запросов — в свои отдельные классы:

* [ ] CONNECT
* [ ] COPY
* [x] GET
* [x] HEAD
* [ ] DELETE
* [ ] LOCK
* [ ] MKCOL
* [ ] MOVE
* [ ] OPTIONS
* [ ] POST
* [ ] PATCH
* [ ] PROPFIND
* [ ] PROPPATCH
* [ ] PUT
* [ ] TRACE
* [ ] UNLOCK


## Сделать

Эти задачи выполнить в любом порядке.

* [ ] Проверить на переполнение буферов от функции WideCharToMultiByte
* [ ] Проверить на переполнение буферов от функции lstrcpy

* [x] Реэнтерабельные функции‐члены объектов из разных потоков.
* [ ] Приводить все NULL к указателю на конкретный тип данных
* [x] Документировать все успешные возвращаемые значения для функций и интерфейсов.
* [ ] Найти все магические числа и заменить на именованные константы.
* [ ] Улучшение производительности: хранение заголовков запроса и ответа в виде двоичного дерева.
* [ ] Кеширование файлов.
* [ ] Различать версию HTTP/1.0 и HTTP/1.1, отдавать соответствующие заголовки.
* [ ] Хранить нераспознанные заголовки запроса.
* [ ] Журналирование запросов.
* [ ] Добавить возможность парольных ресурсов.
* [x] Все коды ошибок WinAPI с описанием отправлять клиенту.
* [x] Новый объект Uri, учитывающий Scheme, Authority, Path, Query, Fragment.
* [ ] Проверить функцию раскодировки URL, возможно, есть библиотечная.
* [x] Загружать виртуальную таблицу статически.
* [x] Новый интерфейс объекта сервера: функции приостановки, возобновления работы. Функция Run не должжна блокировать поток.
* [ ] Передача на сервер через PUT очень больших файлов.
* [x] Исправить предупреждения о присвоении указателей разных типов на реальные функции виртуальных таблиц интерфейсов.
* [x] Поддержка в запросе множественных байтовых диапазонов.
* [x] Исправить перемотку видеофайлов.
* [ ] Асинхронный трубопровод в CGI.


## Согласование содержимого

Согласование содержимого по заголовкам:

* [ ] Accept
* [ ] Accept-Charset
* [x] Accept-Encoding
* [ ] Accept-Language
* [ ] User-Agent

## Контроль жизни объектов

* [x] Возвращать слабые ссылки на коллекцию сайтов
* [x] Возвращать слабые ссылки на коллекцию обработчиков запроса
* [x] Атомарный и неатомарный счётчики ссылок где это нужно.
* [ ] Умные указатели для объектов ядра системы.
* [ ] Умные указатели для интерфейсов.
